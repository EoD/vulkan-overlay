From 6444c4655d6ea54a8bfe5f29e687c49646ce1a10 Mon Sep 17 00:00:00 2001
From: "Luke A. Guest" <laguest@archeia.com>
Date: Fri, 1 Jul 2016 12:02:29 +0100
Subject: [PATCH 5/7] Extra parameter removed from ttm_bo_reserve from 4.7.

---
 amd/backport/include/kcl/kcl_ttm.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/amd/backport/include/kcl/kcl_ttm.h b/amd/backport/include/kcl/kcl_ttm.h
index 3575004..4b11fb0 100644
--- a/amd/backport/include/kcl/kcl_ttm.h
+++ b/amd/backport/include/kcl/kcl_ttm.h
@@ -85,7 +85,11 @@ static inline int kcl_ttm_bo_reserve(struct ttm_buffer_object *bo,
 				 struct ww_acquire_ctx *ticket)
 {
 #if defined(BUILD_AS_DKMS)
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 7, 0)
+	return ttm_bo_reserve(bo, interruptible, no_wait, ticket);
+#else
 	return ttm_bo_reserve(bo, interruptible, no_wait, false, ticket);
+#endif
 #else
 	return ttm_bo_reserve(bo, interruptible, no_wait, ticket);
 #endif
-- 
2.7.3

